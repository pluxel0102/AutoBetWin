<Window
    x:Class="AutoBet.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:tb="using:H.NotifyIcon"
    mc:Ignorable="d"
    Closed="MainWindow_Closed">

    <Grid Background="{ThemeResource AppBackgroundBrush}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- ÐšÐ°ÑÑ‚Ð¾Ð¼Ð½Ñ‹Ð¹ Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº Ð¾ÐºÐ½Ð° -->
        <Grid x:Name="AppTitleBar" 
              Grid.Row="0"
              Height="40"
              Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
              BorderBrush="{ThemeResource DividerStrokeColorDefaultBrush}"
              BorderThickness="0,0,0,1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- Ð˜ÐºÐ¾Ð½ÐºÐ° Ð¸ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ -->
            <StackPanel Grid.Column="0" 
                       Orientation="Horizontal" 
                       Spacing="8" 
                       Margin="16,0,0,0"
                       VerticalAlignment="Center">
                <FontIcon Glyph="&#xE8F1;" 
                         FontSize="16"
                         Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"/>
                <TextBlock Text="AutoBet" 
                          FontSize="13"
                          FontWeight="SemiBold"
                          Foreground="{ThemeResource TextFillColorPrimaryBrush}"
                          VerticalAlignment="Center"/>
            </StackPanel>

            <!-- ÐŸÑƒÑÑ‚Ð¾Ðµ Ð¿Ñ€Ð¾ÑÑ‚Ñ€Ð°Ð½ÑÑ‚Ð²Ð¾ Ð´Ð»Ñ Ð¿ÐµÑ€ÐµÑ‚Ð°ÑÐºÐ¸Ð²Ð°Ð½Ð¸Ñ -->
            <Grid Grid.Column="1"/>
        </Grid>

        <!-- Ð˜ÐºÐ¾Ð½ÐºÐ° Ð² Ñ‚Ñ€ÐµÐµ -->
        <tb:TaskbarIcon
            x:Name="TrayIcon"
            Grid.Row="1"
            ToolTipText="AutoBet - ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ð·Ð°Ñ†Ð¸Ñ ÑÑ‚Ð°Ð²Ð¾Ðº">
            
            <tb:TaskbarIcon.ContextFlyout>
                <MenuFlyout>
                    <MenuFlyoutItem Text="ðŸŽ¯ ÐÐ°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ Ð¾Ð±Ð»Ð°ÑÑ‚Ð¸ MelBet" Click="TrayConfigureROI_Click">
                        <MenuFlyoutItem.Icon>
                            <FontIcon Glyph="&#xE7B8;"/>
                        </MenuFlyoutItem.Icon>
                    </MenuFlyoutItem>
                    <MenuFlyoutSeparator/>
                    <MenuFlyoutItem Text="ðŸ“‚ ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ Ð³Ð»Ð°Ð²Ð½Ð¾Ðµ Ð¾ÐºÐ½Ð¾" Click="TrayShowWindow_Click">
                        <MenuFlyoutItem.Icon>
                            <FontIcon Glyph="&#xE8A7;"/>
                        </MenuFlyoutItem.Icon>
                    </MenuFlyoutItem>
                    <MenuFlyoutItem Text="âš™ï¸ ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸" Click="TraySettings_Click">
                        <MenuFlyoutItem.Icon>
                            <FontIcon Glyph="&#xE713;"/>
                        </MenuFlyoutItem.Icon>
                    </MenuFlyoutItem>
                    <MenuFlyoutSeparator/>
                    <MenuFlyoutItem Text="âŒ Ð’Ñ‹Ñ…Ð¾Ð´" Click="TrayExit_Click">
                        <MenuFlyoutItem.Icon>
                            <FontIcon Glyph="&#xE711;"/>
                        </MenuFlyoutItem.Icon>
                    </MenuFlyoutItem>
                </MenuFlyout>
            </tb:TaskbarIcon.ContextFlyout>
        </tb:TaskbarIcon>
        
        <!-- ÐžÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ ÐºÐ¾Ð½Ñ‚ÐµÐ½Ñ‚ -->
        <Grid Grid.Row="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Ð’ÐµÑ€Ñ…Ð½ÑÑ Ð¿Ð°Ð½ÐµÐ»ÑŒ Ñ Ð²Ñ‹Ð±Ð¾Ñ€Ð¾Ð¼ Ñ€ÐµÐ¶Ð¸Ð¼Ð° Ð¸ ÐºÐ½Ð¾Ð¿ÐºÐ¾Ð¹ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº -->
            <Grid Grid.Row="0" Padding="20,20,20,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Ð’Ñ‹Ð±Ð¾Ñ€ Ñ€ÐµÐ¶Ð¸Ð¼Ð° Ð¸Ð³Ñ€Ñ‹ Ð¿Ð¾ Ñ†ÐµÐ½Ñ‚Ñ€Ñƒ -->
                <Border Grid.Column="1" 
                        Background="{ThemeResource CardBackgroundBrush}"
                        BorderBrush="{ThemeResource BorderBrush}"
                        BorderThickness="1"
                        CornerRadius="20"
                        Padding="8"
                        Height="54"
                        MinWidth="360">
                    <Border.Shadow>
                        <ThemeShadow/>
                    </Border.Shadow>
                    <Border.Translation>0,0,16</Border.Translation>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        
                        <!-- ÐÐ½Ð¸Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð°Ñ "ÐºÐ°Ð¿Ð»Ñ" - Ð¸Ð½Ð´Ð¸ÐºÐ°Ñ‚Ð¾Ñ€ Ð²Ñ‹Ð±Ð¾Ñ€Ð° -->
                        <Border 
                            x:Name="SelectionIndicator"
                            Grid.Column="0"
                            Grid.ColumnSpan="1"
                            Background="{ThemeResource AccentBrush}"
                            CornerRadius="14"
                            Margin="0"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Stretch"
                            RenderTransformOrigin="0.5,0.5">
                            <Border.RenderTransform>
                                <CompositeTransform x:Name="IndicatorTransform" TranslateX="0" ScaleX="1" ScaleY="1"/>
                            </Border.RenderTransform>
                        </Border>                        <!-- ÐšÐ½Ð¾Ð¿ÐºÐ¸ (Ð¿Ñ€Ð¾Ð·Ñ€Ð°Ñ‡Ð½Ñ‹Ðµ, Ð¿Ð¾Ð²ÐµÑ€Ñ… Ð¸Ð½Ð´Ð¸ÐºÐ°Ñ‚Ð¾Ñ€Ð°) -->
                        <Button 
                            x:Name="BetBoomButton"
                            Grid.Column="0"
                            Content="BetBoom"
                            Background="Transparent"
                            Foreground="White"
                            BorderThickness="0"
                            Padding="16,10"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Stretch"
                            FontSize="15"
                            FontWeight="SemiBold"
                            CornerRadius="14"
                            Click="OnBetBoomClick">
                            <Button.Resources>
                                <SolidColorBrush x:Key="ButtonBackgroundPointerOver" Color="Transparent"/>
                                <SolidColorBrush x:Key="ButtonBackgroundPressed" Color="#20FFFFFF"/>
                            </Button.Resources>
                        </Button>
                        
                        <Button 
                            x:Name="MelBetButton"
                            Grid.Column="1"
                            Content="ÐœÐµÐ»Ð‘ÐµÑ‚"
                            Background="Transparent"
                            Foreground="{ThemeResource TextSecondaryBrush}"
                            BorderThickness="0"
                            Padding="16,10"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Stretch"
                            FontSize="15"
                            FontWeight="SemiBold"
                            CornerRadius="14"
                            Click="OnMelBetClick">
                            <Button.Resources>
                                <SolidColorBrush x:Key="ButtonBackgroundPointerOver" Color="Transparent"/>
                                <SolidColorBrush x:Key="ButtonBackgroundPressed" Color="#20000000"/>
                            </Button.Resources>
                        </Button>
                    </Grid>
                </Border>

                <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº ÑÐ¿Ñ€Ð°Ð²Ð° -->
                <StackPanel Grid.Column="2"
                           HorizontalAlignment="Right"
                           Orientation="Horizontal"
                           Spacing="8">
                    
                    <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ð¹ -->
                    <Button 
                        x:Name="CheckUpdatesButton"
                        Style="{StaticResource SettingsButtonStyle}"
                        Click="OnCheckUpdatesButtonClick"
                        ToolTipService.ToolTip="ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ">
                        <FontIcon FontFamily="Segoe MDL2 Assets" Glyph="&#xE895;" FontSize="20"/>
                    </Button>
                    
                    <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº -->
                    <Button 
                        Style="{StaticResource SettingsButtonStyle}"
                        Click="OnSettingsButtonClick"
                        ToolTipService.ToolTip="ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸">
                        <FontIcon FontFamily="Segoe MDL2 Assets" Glyph="&#xE713;" FontSize="20"/>
                    </Button>
                </StackPanel>
            </Grid>

            <!-- ÐžÐ±Ð»Ð°ÑÑ‚ÑŒ ÐºÐ¾Ð½Ñ‚ÐµÐ½Ñ‚Ð° -->
            <Grid Grid.Row="1" Padding="20">
                <Border 
                    x:Name="MainContentCard"
                    Style="{StaticResource CardStyle}"
                    Opacity="0">
                    <Border.RenderTransform>
                        <TranslateTransform Y="20"/>
                    </Border.RenderTransform>
                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" Spacing="20">
                        <TextBlock 
                            x:Name="CurrentModeText"
                            Text="Ð’Ñ‹Ð±Ñ€Ð°Ð½ Ñ€ÐµÐ¶Ð¸Ð¼: BetBoom" 
                            FontSize="24"
                            FontWeight="SemiBold"
                            Foreground="{ThemeResource TextPrimaryBrush}"
                            HorizontalAlignment="Center"/>
                        <TextBlock 
                            Text="Ð˜Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ Ð³Ð¾Ñ‚Ð¾Ð² Ðº Ñ€Ð°Ð±Ð¾Ñ‚Ðµ" 
                            FontSize="16"
                            Foreground="{ThemeResource TextSecondaryBrush}"
                            HorizontalAlignment="Center"/>
                        
                        <!-- Ð¢ÐµÑÑ‚Ð¾Ð²Ð°Ñ Ð½Ð°Ð´Ð¿Ð¸ÑÑŒ Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ð¹ -->
                        <Border Background="#10B981"
                               CornerRadius="8"
                               Padding="16,8"
                               Margin="0,20,0,0"
                               HorizontalAlignment="Center">
                            <TextBlock 
                                Text="âœ¨ Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ð°Ð²Ñ‚Ð¾Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ð¹ Ð°ÐºÑ‚Ð¸Ð²Ð½Ð° - v1.0.1" 
                                FontSize="14"
                                FontWeight="Bold"
                                Foreground="White"
                                HorizontalAlignment="Center"/>
                        </Border>
                        
                        <!-- ÐšÐ½Ð¾Ð¿ÐºÐ¸ Ð´Ð»Ñ MelBet -->
                        <StackPanel x:Name="MelBetButtonsPanel" Visibility="Collapsed" Spacing="16" HorizontalAlignment="Center">
                            <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° Ð·Ð°Ð¿ÑƒÑÐºÐ° ÐœÐµÐ»Ð‘ÐµÑ‚ -->
                            <Button 
                                x:Name="LaunchMelBetButton"
                                HorizontalAlignment="Center"
                                Padding="32,16"
                                CornerRadius="24"
                                Background="{ThemeResource AccentBrush}"
                                Click="LaunchMelBetButton_Click"
                                PointerEntered="OnButtonPointerEntered"
                                PointerExited="OnButtonPointerExited"
                                PointerPressed="OnButtonPointerPressed"
                                PointerReleased="OnButtonPointerReleased">
                                <StackPanel Orientation="Horizontal" Spacing="12">
                                    <TextBlock Text="Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ ÐœÐµÐ»Ð‘ÐµÑ‚" FontSize="18" FontWeight="Bold" Foreground="White"/>
                                </StackPanel>
                                <Button.Shadow>
                                    <ThemeShadow/>
                                </Button.Shadow>
                                <Button.Translation>0,0,12</Button.Translation>
                            </Button>
                            
                            <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ ROI Ð´Ð»Ñ MelBet -->
                            <Button 
                                x:Name="ConfigureROIButton"
                                HorizontalAlignment="Center"
                                Padding="24,12"
                                CornerRadius="20"
                                Click="ConfigureROIButton_Click"
                                PointerEntered="OnButtonPointerEntered"
                                PointerExited="OnButtonPointerExited"
                                PointerPressed="OnButtonPointerPressed"
                                PointerReleased="OnButtonPointerReleased">
                                <StackPanel Orientation="Horizontal" Spacing="12">
                                    <TextBlock Text="ÐÐ°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ Ð¾Ð±Ð»Ð°ÑÑ‚Ð¸ Ñ€Ð°ÑÐ¿Ð¾Ð·Ð½Ð°Ð²Ð°Ð½Ð¸Ñ" FontSize="15" FontWeight="SemiBold"/>
                                </StackPanel>
                                <Button.Shadow>
                                    <ThemeShadow/>
                                </Button.Shadow>
                                <Button.Translation>0,0,8</Button.Translation>
                            </Button>
                            
                            <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº Ñ€ÐµÐ¶Ð¸Ð¼Ð° ÐœÐµÐ»Ð‘ÐµÑ‚ -->
                            <Button 
                                x:Name="MelBetSettingsButton"
                                HorizontalAlignment="Center"
                                Padding="24,12"
                                CornerRadius="20"
                                Click="MelBetSettingsButton_Click"
                                PointerEntered="OnButtonPointerEntered"
                                PointerExited="OnButtonPointerExited"
                                PointerPressed="OnButtonPointerPressed"
                                PointerReleased="OnButtonPointerReleased">
                                <StackPanel Orientation="Horizontal" Spacing="12">
                                    <TextBlock Text="ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð´Ð»Ñ Ñ€ÐµÐ¶Ð¸Ð¼Ð° ÐœÐµÐ»Ð‘ÐµÑ‚" FontSize="15" FontWeight="SemiBold"/>
                                </StackPanel>
                                <Button.Shadow>
                                    <ThemeShadow/>
                                </Button.Shadow>
                                <Button.Translation>0,0,8</Button.Translation>
                            </Button>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </Grid>
        </Grid>

        <!-- ÐŸÐ°Ð½ÐµÐ»ÑŒ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº (Ð¸Ð·Ð½Ð°Ñ‡Ð°Ð»ÑŒÐ½Ð¾ ÑÐºÑ€Ñ‹Ñ‚Ð°) -->
        <Grid 
            x:Name="SettingsOverlay"
            Grid.RowSpan="2"
            Background="#80000000" 
            Visibility="Collapsed"
            Opacity="0"
            Tapped="OnSettingsOverlayTapped">
            
            <Border 
                x:Name="SettingsPanel"
                HorizontalAlignment="Right"
                VerticalAlignment="Stretch"
                Width="350"
                Background="{ThemeResource SettingsPanelBackgroundBrush}"
                BorderBrush="{ThemeResource BorderBrush}"
                BorderThickness="1,0,0,0"
                CornerRadius="12,0,0,12"
                Tapped="OnSettingsPanelTapped">
                <Border.BackgroundTransition>
                    <BrushTransition Duration="0:0:0.3"/>
                </Border.BackgroundTransition>
                <Border.Shadow>
                    <ThemeShadow />
                </Border.Shadow>
                <Border.RenderTransform>
                    <TranslateTransform X="350"/>
                </Border.RenderTransform>
                
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº Ð¿Ð°Ð½ÐµÐ»Ð¸ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº -->
                    <Grid Grid.Row="0" Padding="20" BorderBrush="{ThemeResource BorderBrush}" BorderThickness="0,0,0,1">
                        <TextBlock 
                            Text="ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸" 
                            FontSize="24"
                            FontWeight="SemiBold"
                            Foreground="{ThemeResource TextPrimaryBrush}"/>
                        <Button 
                            HorizontalAlignment="Right"
                            Style="{StaticResource SettingsButtonStyle}"
                            Click="OnCloseSettingsClick">
                            <FontIcon FontFamily="Segoe MDL2 Assets" Glyph="&#xE711;" FontSize="16"/>
                        </Button>
                    </Grid>

                    <!-- Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº -->
                    <ScrollViewer Grid.Row="1" Padding="20">
                        <StackPanel Spacing="20">
                            <!-- Ð¡ÐµÐºÑ†Ð¸Ñ Ñ‚ÐµÐ¼Ñ‹ -->
                            <StackPanel Spacing="12">
                                <TextBlock 
                                    Text="ÐžÑ„Ð¾Ñ€Ð¼Ð»ÐµÐ½Ð¸Ðµ" 
                                    FontSize="18"
                                    FontWeight="SemiBold"
                                    Foreground="{ThemeResource TextPrimaryBrush}"/>
                                
                                <Border Style="{StaticResource CardStyle}">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <StackPanel Grid.Column="0" Spacing="4">
                                            <TextBlock 
                                                Text="Ð¢Ñ‘Ð¼Ð½Ð°Ñ Ñ‚ÐµÐ¼Ð°" 
                                                FontSize="16"
                                                Foreground="{ThemeResource TextPrimaryBrush}"/>
                                            <TextBlock 
                                                Text="ÐŸÐµÑ€ÐµÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ð¼ÐµÐ¶Ð´Ñƒ ÑÐ²ÐµÑ‚Ð»Ð¾Ð¹ Ð¸ Ñ‚Ñ‘Ð¼Ð½Ð¾Ð¹ Ñ‚ÐµÐ¼Ð¾Ð¹" 
                                                FontSize="12"
                                                Foreground="{ThemeResource TextSecondaryBrush}"
                                                TextWrapping="Wrap"/>
                                        </StackPanel>
                                        
                                        <ToggleSwitch 
                                            x:Name="ThemeToggle"
                                            Grid.Column="1"
                                            Toggled="OnThemeToggled"
                                            VerticalAlignment="Center"/>
                                    </Grid>
                                </Border>
                            </StackPanel>

                            <!-- Ð¡ÐµÐºÑ†Ð¸Ñ OpenRouter API -->
                            <StackPanel Spacing="12">
                                <TextBlock 
                                    Text="OpenRouter API" 
                                    FontSize="18"
                                    FontWeight="SemiBold"
                                    Foreground="{ThemeResource TextPrimaryBrush}"/>
                                
                                <!-- API ÐºÐ»ÑŽÑ‡ -->
                                <Border Style="{StaticResource CardStyle}">
                                    <StackPanel Spacing="12">
                                        <TextBlock 
                                            Text="API ÐšÐ»ÑŽÑ‡" 
                                            FontSize="14"
                                            FontWeight="SemiBold"
                                            Foreground="{ThemeResource TextPrimaryBrush}"/>
                                        <TextBox 
                                            x:Name="ApiKeyTextBox"
                                            PlaceholderText="Ð’ÑÑ‚Ð°Ð²ÑŒÑ‚Ðµ Ð²Ð°Ñˆ API ÐºÐ»ÑŽÑ‡ OpenRouter"
                                            CornerRadius="8"
                                            Padding="12,10"
                                            TextChanged="OnApiKeyChanged"/>
                                    </StackPanel>
                                </Border>

                                <!-- ÐœÐ¾Ð´ÐµÐ»Ð¸ Ñ€Ð°ÑÐ¿Ð¾Ð·Ð½Ð°Ð²Ð°Ð½Ð¸Ñ -->
                                <Border Style="{StaticResource CardStyle}">
                                    <StackPanel Spacing="12">
                                        <TextBlock 
                                            Text="ÐœÐ¾Ð´ÐµÐ»Ð¸ Ñ€Ð°ÑÐ¿Ð¾Ð·Ð½Ð°Ð²Ð°Ð½Ð¸Ñ" 
                                            FontSize="14"
                                            FontWeight="SemiBold"
                                            Foreground="{ThemeResource TextPrimaryBrush}"/>
                                        
                                        <RadioButton 
                                            x:Name="RecognitionGPT5Radio"
                                            Content="ChatGPT 5"
                                            GroupName="RecognitionModel"
                                            Checked="OnRecognitionModelChanged"/>
                                        <RadioButton 
                                            x:Name="RecognitionGeminiRadio"
                                            Content="Gemini 2.5 Flash Lite Preview"
                                            GroupName="RecognitionModel"
                                            Checked="OnRecognitionModelChanged"/>
                                    </StackPanel>
                                </Border>

                                <!-- ÐœÐ¾Ð´ÐµÐ»ÑŒ Ð´Ð»Ñ Ð°Ð½Ð°Ð»Ð¸Ð·Ð° -->
                                <Border Style="{StaticResource CardStyle}">
                                    <StackPanel Spacing="12">
                                        <TextBlock 
                                            Text="ÐœÐ¾Ð´ÐµÐ»ÑŒ Ð´Ð»Ñ Ð°Ð½Ð°Ð»Ð¸Ð·Ð° Ð½ÐµÐ¹Ñ€Ð¾ÑÐµÑ‚ÑŒÑŽ" 
                                            FontSize="14"
                                            FontWeight="SemiBold"
                                            Foreground="{ThemeResource TextPrimaryBrush}"/>
                                        
                                        <RadioButton 
                                            x:Name="AnalysisDeepSeekRadio"
                                            Content="DeepSeek V3.2 Exp"
                                            GroupName="AnalysisModel"
                                            Checked="OnAnalysisModelChanged"/>
                                        <RadioButton 
                                            x:Name="AnalysisClaudeRadio"
                                            Content="Claude Opus 4.1"
                                            GroupName="AnalysisModel"
                                            Checked="OnAnalysisModelChanged"/>
                                    </StackPanel>
                                </Border>

                                <!-- ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð¿Ñ€Ð¾ÐºÑÐ¸ -->
                                <Border Style="{StaticResource CardStyle}">
                                    <StackPanel Spacing="12">
                                        <ToggleSwitch 
                                            x:Name="ProxyToggle"
                                            Header="Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ð¿Ñ€Ð¾ÐºÑÐ¸-ÑÐµÑ€Ð²ÐµÑ€"
                                            FontWeight="SemiBold"
                                            Toggled="OnProxyToggled"/>
                                        
                                        <StackPanel x:Name="ProxySettingsPanel" Spacing="12" Visibility="Collapsed">
                                            <TextBox 
                                                x:Name="ProxyHostTextBox"
                                                Header="IP Ð°Ð´Ñ€ÐµÑ / Ð¥Ð¾ÑÑ‚"
                                                PlaceholderText="192.168.1.1 Ð¸Ð»Ð¸ proxy.example.com"
                                                CornerRadius="8"
                                                Padding="12,10"
                                                TextChanged="OnProxySettingsChanged"/>
                                            
                                            <TextBox 
                                                x:Name="ProxyPortTextBox"
                                                Header="ÐŸÐ¾Ñ€Ñ‚"
                                                PlaceholderText="8080"
                                                InputScope="Number"
                                                CornerRadius="8"
                                                Padding="12,10"
                                                TextChanged="OnProxySettingsChanged"/>
                                            
                                            <TextBox 
                                                x:Name="ProxyUsernameTextBox"
                                                Header="Ð›Ð¾Ð³Ð¸Ð½ (Ð½ÐµÐ¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾)"
                                                PlaceholderText="username"
                                                CornerRadius="8"
                                                Padding="12,10"
                                                TextChanged="OnProxySettingsChanged"/>
                                            
                                            <PasswordBox 
                                                x:Name="ProxyPasswordBox"
                                                Header="ÐŸÐ°Ñ€Ð¾Ð»ÑŒ (Ð½ÐµÐ¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾)"
                                                PlaceholderText="password"
                                                CornerRadius="8"
                                                Padding="12,10"
                                                PasswordChanged="OnProxySettingsChanged"/>
                                            
                                            <ComboBox 
                                                x:Name="ProxyTypeComboBox"
                                                Header="Ð¢Ð¸Ð¿ Ð¿Ñ€Ð¾ÐºÑÐ¸"
                                                CornerRadius="8"
                                                HorizontalAlignment="Stretch"
                                                SelectionChanged="OnProxySettingsChanged">
                                                <ComboBoxItem Content="HTTP/HTTPS" Tag="Http" IsSelected="True"/>
                                                <ComboBoxItem Content="SOCKS5" Tag="Socks5"/>
                                            </ComboBox>
                                            
                                            <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð¿Ñ€Ð¾ÐºÑÐ¸ -->
                                            <Button 
                                                x:Name="TestProxyButton"
                                                HorizontalAlignment="Stretch"
                                                Padding="12,10"
                                                CornerRadius="8"
                                                Background="{ThemeResource AccentBrush}"
                                                Foreground="White"
                                                FontWeight="SemiBold"
                                                Click="OnTestProxyClick">
                                                <Grid HorizontalAlignment="Center">
                                                    <TextBlock 
                                                        x:Name="TestProxyButtonText"
                                                        Text="ðŸ”Œ ÐŸÑ€Ð¾Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¿Ñ€Ð¾ÐºÑÐ¸"
                                                        VerticalAlignment="Center"
                                                        Foreground="White"/>
                                                    <ProgressRing 
                                                        x:Name="TestProxyProgressRing"
                                                        Width="20"
                                                        Height="20"
                                                        IsActive="False"
                                                        Visibility="Collapsed"
                                                        Foreground="White"/>
                                                </Grid>
                                            </Button>
                                        </StackPanel>
                                    </StackPanel>
                                </Border>

                                <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ API -->
                                <Button 
                                    x:Name="TestApiButton"
                                    HorizontalAlignment="Stretch"
                                    Padding="16,12"
                                    CornerRadius="8"
                                    Background="{ThemeResource AccentBrush}"
                                    Foreground="White"
                                    FontWeight="SemiBold"
                                    Click="OnTestApiClick">
                                    <Grid HorizontalAlignment="Center">
                                        <TextBlock 
                                            x:Name="TestApiButtonText"
                                            Text="Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ API OpenRouter"
                                            VerticalAlignment="Center"
                                            Foreground="White"/>
                                        <ProgressRing 
                                            x:Name="TestApiProgressRing"
                                            Width="20"
                                            Height="20"
                                            IsActive="False"
                                            Visibility="Collapsed"
                                            Foreground="White"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center">
                                            <ProgressRing.Resources>
                                                <SolidColorBrush x:Key="ProgressRingForegroundThemeBrush" Color="White"/>
                                            </ProgressRing.Resources>
                                        </ProgressRing>
                                    </Grid>
                                </Button>
                            </StackPanel>

                            <!-- Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¸ -->
                            <StackPanel Spacing="12">
                                <TextBlock 
                                    Text="Ðž Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¸" 
                                    FontSize="18"
                                    FontWeight="SemiBold"
                                    Foreground="{ThemeResource TextPrimaryBrush}"/>
                                
                                <Border Style="{StaticResource CardStyle}">
                                    <StackPanel Spacing="8">
                                        <TextBlock 
                                            Text="AutoBet" 
                                            FontSize="16"
                                            FontWeight="SemiBold"
                                            Foreground="{ThemeResource TextPrimaryBrush}"/>
                                        <TextBlock 
                                            x:Name="AppVersionText"
                                            Text="Ð’ÐµÑ€ÑÐ¸Ñ 1.0.1" 
                                            FontSize="14"
                                            Foreground="{ThemeResource TextSecondaryBrush}"/>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </StackPanel>
                    </ScrollViewer>
                </Grid>
            </Border>
        </Grid>
    </Grid>
</Window>
